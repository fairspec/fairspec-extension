{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Fairspec Extension Profile",
  "allOf": [
    { "$ref": "https://fairspec.org/profiles/0.3.0/dataset.json" },
    { "$ref": "#/$defs/Dataset" }
  ],
  "$defs": {
    "Dataset": {
      "type": "object",
      "required": ["$schema", "resources"],
      "properties": {
        "$schema": {
          "const": "https://fairspec.github.io/fairspec-extension/profiles/0.4.0/dataset.json"
        },
        "resources": {
          "type": "array",
          "minItems": 1,
          "items": { "$ref": "#/$defs/Resource" }
        }
      }
    },
    "Resource": {
      "oneOf": [
        {
          "$ref": "#/$defs/Table1Resource"
        },
        {
          "$ref": "#/$defs/Table2Resource"
        }
      ]
    },
    "Table1Resource": {
      "type": "object",
      "required": ["name", "tableSchema"],
      "description": "Data records have to conform to the Table1 schema",
      "properties": {
        "name": {
          "const": "table1"
        },
        "tableSchema": {
          "const": "https://fairspec.github.io/fairspec-extension/schemas/0.4.0/table1.json"
        }
      }
    },
    "Table2Resource": {
      "type": "object",
      "required": ["name", "tableSchema"],
      "description": "Data items have to conform to the Table2 schema",
      "properties": {
        "name": {
          "const": "table2"
        },
        "tableSchema": {
          "const": "https://fairspec.github.io/fairspec-extension/schemas/0.4.0/table2.json"
        }
      }
    }
  }
}
